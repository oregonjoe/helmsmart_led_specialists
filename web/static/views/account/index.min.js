(function(){"use strict";app=app||{};app.Record=Backbone.Model.extend({idAttribute:"_id",defaults:{_id:null,shortID:null,name:"",isPrivate:false},edit_url:function(){return"/board/edit/"+(this.attributes.shortID||this.id)},view_url:function(){return"/board/"+(this.attributes.shortID||this.id)}});app.RecordCollection=Backbone.Collection.extend({model:app.Record,url:"/admin/accounts/",parse:function(results){return results.data}});app.ResultsView=Backbone.View.extend({el:"#results-table",template:_.template($("#tmpl-results-table").html()),initialize:function(){this.collection=new app.RecordCollection(app.mainView.results);this.listenTo(this.collection,"reset",this.render);this.render()},render:function(){this.$el.html(this.template());var frag=document.createDocumentFragment();this.collection.each(function(record){var view=new app.ResultsRowView({model:record});frag.appendChild(view.render().el)},this);$("#results-rows").append(frag);if(this.collection.length===0){$("#results-rows").append($("#tmpl-results-empty-row").html())}}});app.ResultsRowView=Backbone.View.extend({tagName:"tr",template:_.template($("#tmpl-results-row").html()),events:{"click .btn-details":"viewDetails"},viewDetails:function(){location.href=this.model.edit_url()},render:function(){this.$el.html(this.template(this.model.attributes));this.$el.find("a").attr("href",this.model.view_url());this.$el.find(".private-status").html(this.model.get("isPrivate")?'<span style="color:#a1882b;"><i class="fa fa-lock"></i> Private</span>':'<span style="color:#6FAF54;"><i class="fa fa-unlock-alt"></i> Public</span>');return this}});app.MainView=Backbone.View.extend({el:".page .container",initialize:function(){app.mainView=this;this.results=JSON.parse(unescape($("#data-results").html()));app.resultsView=new app.ResultsView}});app.Router=Backbone.Router.extend({routes:{"":"default","q/:params":"query"},initialize:function(){app.mainView=new app.MainView},"default":function(){if(!app.firstLoad){app.resultsView.collection.fetch({reset:true})}app.firstLoad=false},query:function(params){app.resultsView.collection.fetch({data:params,reset:true});app.firstLoad=false}});$(document).ready(function(){app.firstLoad=true;app.router=new app.Router;Backbone.history.start();$("#create-new-btn").click(function(event){var freeboardName=$("#freeboardName").val();if(!freeboardName){alert("Please enter a name for this board.");event.preventDefault()}})})})();
//# sourceMappingURL=index.min.js.map